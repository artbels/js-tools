!function(){var T=this.T={cyrrilize:function(input){if(input&&"string"==typeof(input="number"==typeof input?input.toString():input)){for(var letterMap={"/":" ","\\":" ","'":"",a:"а",b:"б",c:"с",d:"д",e:"е",f:"ф",g:"г",h:"х",i:"и",j:"ж",k:"к",l:"л",m:"ь",n:"н",o:"о",p:"п",q:"к",r:"р",s:"с",t:"т",u:"у",v:"в",w:"в",x:"кс",y:"й",z:"з"},finStr="",i=0;i<input.length;i++)letterMap[input[i].toLowerCase()]?finStr+=letterMap[input[i].toLowerCase()]:finStr+=input[i];return finStr}}};Blocks.wrongKeybCyr=function(str){if(str&&"string"==typeof str){for(var conv={"й":"q","ф":"a","я":"z","ц":"w","ы":"s","ч":"x","у":"e","в":"d","с":"c","к":"r","а":"f","м":"v","е":"t","п":"g","и":"b","н":"y","р":"h","т":"n","г":"u","о":"j","ь":"m","ш":"i","л":"k","б":",","щ":"o","д":"l","ю":".","з":"p","х":"[","ъ":"]","э":"'","ж":";"},finStr="",i=0;i<str.length;i++)conv[str[i].toLowerCase()]?finStr+=conv[str[i].toLowerCase()]:finStr+=str[i];return finStr}},Blocks.wrongKeybLat=function(str){if(str&&"string"==typeof str){for(var conv={q:"й",a:"ф",z:"я",w:"ц",s:"ы",x:"ч",e:"у",d:"в",c:"с",r:"к",f:"а",v:"м",t:"е",g:"п",b:"и",y:"н",h:"р",n:"т",u:"г",j:"о",m:"ь",i:"ш",k:"л",",":"б",o:"щ",l:"д",".":"ю",p:"з","[":"х","]":"ъ","'":"э",";":"ж"},finStr="",i=0;i<str.length;i++)conv[str[i].toLowerCase()]?finStr+=conv[str[i].toLowerCase()]:finStr+=str[i];return finStr}},T.runPromiseAll=async function(o){const promRes=await Promise.all(Object.values(o));Object.keys(o).forEach((key,i)=>o[key]=promRes[i])},T.rp=function(params){if((params="string"==typeof params?{url:params}:params).url||params.uri)return params.url=params.url||params.uri,params.method=params.method||"GET",params.timeout=params.timeout||0,params.json=void 0===params.json||params.json,new Promise(function(resolve,reject){var req=new XMLHttpRequest;if(req.open(params.method,params.url),params.body&&req.setRequestHeader("Content-Type","application/json"),params.headers)for(var key in params.headers)req.setRequestHeader(key,params.headers[key]);req.onload=function(){if(params.json)try{resolve(JSON.parse(req.response))}catch(e){resolve(req.response)}else resolve(req.response)},req.timeout=params.timeout,req.ontimeout=function(){console.log("getRequest timed out: "+req.timeout),reject(req.statusText)},req.onerror=function(){reject("Network Error")},req.send(params.body&&JSON.stringify(params.body))});throw Error("no url")},T.post=function(apiUrl,body){return T.rp({url:apiUrl,body:body,method:"POST"})},T.get=function(apiUrl){return T.rp({url:apiUrl,method:"GET"})},T.patch=function(apiUrl,body){return T.rp({url:apiUrl,body:body,method:"PATCH"})},T.delete=function(apiUrl){return T.rp({url:apiUrl,method:"DELETE"})},T.iter=function(arr,func,params){return new Promise(function(responce,err){void 0===responce&&(responce=function(){}),void 0===err&&(err=function(){});var startTime=new Date,finalArr=((params="function"==typeof(params=params||{})?{cb:params}:params).cb=params.cb||function(){},params.index=params.index||params.i||0,params.len=params.len||arr.length,params.timeout=params.timeout||0,params.concurrency=params.concurrency||1,params.consoleRound=params.consoleRound||Math.floor(params.len/20),void 0===params.verbose&&1e3<arr.length&&(params.verbose=!0),[]);if(arr&&arr.length){var received=0;for(params.concurrency=Math.min(params.len,params.concurrency);params.index<params.concurrency;params.index++)launchNextLine(params.index)}else responce(finalArr),params.cb&&params.cb(finalArr);function launchNextLine(index){params.verbose&&(1==index||0!==index&&index%params.consoleRound==0)&&(timeDiff=(new Date-startTime)/1e3,percCompl=params.index/params.len,console.log((100*percCompl).toFixed(0)+"% completed, "+(timeDiff/percCompl-timeDiff).toFixed(0)+" seconds to finish"));var timeDiff,percCompl=arr[index];func(percCompl,function(res){setTimeout(function(){!function(res,index){res&&(finalArr[index]=res);++received==params.len?(params.cb&&params.cb(finalArr),responce(finalArr)):params.index<params.len&&(launchNextLine(params.index),params.index++)}(res,index)},params.timeout)},params)}})},T.live=function(){var servUrl="http://"+(location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1";T.importJs(servUrl)},T.setPageTitle=function(){var pagePath=window.location.pathname,pageTitle=document.querySelector("title");pageTitle&&pagePath&&(pageTitle.innerHTML=pagePath.split("/").pop())},T.getLS=function(prop,message,placeholder){var data;return message=message||"Enter data for "+prop,placeholder=placeholder||"",localStorage[prop]&&0!==localStorage[prop].length?data=localStorage[prop]:(data=prompt(message,placeholder),localStorage[prop]=data),data},T.addHit=function(key,obj){void 0===obj[key]?obj[key]=1:obj[key]++},T.genId=function(len){return len=len||10,Math.random().toString(36).substr(2,len)},T.importJs=function(src,lookFor,onload){var s;!function(src){for(var loadedScripts=document.getElementsByTagName("script"),i=loadedScripts.length;i--;)if(loadedScripts[i].src==src)return 1;return}(src)?((s=document.createElement("script")).setAttribute("type","text/javascript"),s.setAttribute("src",src),onload&&function waitForScriptLoad(lookFor,onload){window.waitForScriptLoadInterv=setInterval(function(){void 0!==window[lookFor]||window[lookFor]?(clearInterval(window.waitForScriptLoadInterv),onload()):waitForScriptLoad(lookFor,onload)},50)}(lookFor,onload),(document.getElementsByTagName("head")[0]||document.body).appendChild(s)):onload&&onload()},T.importCss=function(href){var s;!function(href){for(var loadedLinks=document.getElementsByTagName("link"),i=loadedLinks.length;i--;)if(loadedLinks[i].href==href)return 1;return}(href)&&((s=document.createElement("link")).setAttribute("rel","stylesheet"),s.setAttribute("href",href),(document.getElementsByTagName("head")[0]||document.body).appendChild(s))},T.cmprArr=function(oldArr,newArr,cb){var o={del:[],add:[]},newSet={},i1=0,l1=oldArr.length;!function iter(){for(var oldItem=oldArr[i1],strOld=JSON.stringify(oldItem),matchOld=!1,i2=0;i2<newArr.length;i2++){var newItem=newArr[i2],newStr=JSON.stringify(newItem);if(0===i1&&(newSet[newStr]=newItem),strOld==newStr&&(matchOld=!0,delete newSet[newStr],0!==i1))break}if(matchOld||o.del.push(oldItem),++i1<l1)iter();else{for(var key in newSet)o.add.push(newSet[key]);cb(o)}}()},T.getTextareaArr=function(node){return(node="string"==typeof node?document.querySelector(node):node).value.trim().split(/\n\r?/).filter(function(a){return a})},T.getTsv=function(arr,delim){delim=delim||"\t";for(var rowArr=[],columns={},i=0;i<arr.length;i++)for(var key in arr[i])columns[key]=!0;rowArr.push(Object.keys(columns).join(delim));for(var j=0;j<arr.length;j++){var prop,obj=arr[j],valArr=[];for(prop in obj){var val=obj[prop];valArr.push(val)}var rowStr=valArr.join(delim);rowArr.push(rowStr)}return rowArr.join("\n")},T.copy2Clip=function(str){var textarea=document.createElement("textarea");textarea.value=str,textarea.setAttribute("value",str),(textarea=document.body.appendChild(textarea)).select();try{if(!document.execCommand("copy"))throw"Not allowed."}catch(e){textarea.remove(),console.log("document.execCommand('copy'); is not supported"),prompt("Copy the text (ctrl c, enter)",str)}finally{"undefined"==typeof e&&textarea.remove()}},T.convUpperFirst=function(str){if(str){if("string"!=typeof str)throw Error("str !== string");str=str.trim();for(var finStr="",i=0;i<str.length;i++){var prev,l=str[i];/[а-яеґёіїє]/i.test(str)?0===i||(prev=finStr.slice(-1),/[\- ]/.test(prev))?finStr+=l.toUpperCase():finStr+=l.toLowerCase():finStr+=l}return finStr}},T.getWeek=function(date){var target=new Date(date.valueOf()),date=(date.getDay()+6)%7,date=(target.setDate(target.getDate()-date+3),target.valueOf());return target.setMonth(0,1),4!=target.getDay()&&target.setMonth(0,1+(4-target.getDay()+7)%7),1+Math.ceil((date-target)/6048e5)},T.getDate=function(date){var reCyrDate,matchCyrDate;return"number"==typeof date?date=new Date(date):"string"==typeof date?(matchCyrDate=date.match(reCyrDate=/(\d{1,2})(?:\.|\-|\/)(\d{1,2})(?:\.|\-|\/)(\d{4})/),date=reCyrDate.test(date)?new Date(matchCyrDate[3]+"."+matchCyrDate[2]+"."+matchCyrDate[1]):new Date(date)):"object"!=typeof str&&(date=void 0),date},T.getDateDeriv=function(date){var o={srcDate:date},month=(o.year=date.getFullYear(),date.getMonth()+1),monthString=1==String(month).length?"0"+month:String(month),dayString=(o.day=date.getDate(),1==String(o.day).length?"0"+o.day:String(o.day)),dayString=(o.dateDot=o.year+"."+monthString+"."+dayString,o.dateSlash=o.year+"-"+monthString+"-"+dayString,o.date=new Date(o.dateDot),o.dateNum=Number(new Date(o.dateDot)),T.getWeek(date)),date=1==String(dayString).length?"0"+dayString:String(dayString);return o.yearMonth=o.year.toString().slice(-2)+"/"+monthString,o.yearWeek=(1==month&&-1!==[52,53].indexOf(dayString)?o.year-1:o.year).toString().slice(-2)+"/"+date,o},T.getJsonFromStr=function(str,start,stop){str=str.split(start);if(str[1]){start=str[1].trim(),stop&&(start=start.split(stop)[0].trim());try{return start="var json = "+(start=function(str){str=str.trim();for(var o={curly:0,straight:0,one:0,two:0},i=0;i<str.length;i++){switch(str[i]){case"{":o.curly++;break;case"}":o.curly--;break;case"[":o.straight++;break;case"]":o.straight--;break;case"'":o.one%2==0?o.one++:o.one--;break;case'"':o.two%2==0?o.two++:o.two--}if(1<i&&o.curly+o.straight+o.one+o.two===0)return str.substr(0,i+1)}}(start).trim())+"; return json",new Function(start)()}catch(e){return e}}},T.json2qs=function(o){return"?"+Object.keys(o).map(function(key){return encodeURIComponent(key)+"="+encodeURIComponent(o[key])}).join("&")},T.qs2json=function(){var search=location.search.substring(1).replace(/\/$/,"");if(search)return search=JSON.parse('{"'+search.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(key,value){return""===key?value:decodeURIComponent(value)})},T.roundCoord=function(n,roundTo){return roundTo=roundTo||1e6,Math.round(Number(n)*roundTo)/roundTo},T.round=function(n,roundTo){return roundTo=roundTo||100,Math.round(Number(n)*roundTo)/roundTo},T.escapeRegExp=function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},"undefined"!=typeof module&&module.exports&&(module.exports=T)}();